{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchProducts = createAsyncThunk(\"products/fetchProducts\", async () => {\n  const response = await axios.get(\"http://localhost:5000/api/products\");\n  localStorage.setItem(\"products\", JSON.stringify(response.data));\n  return response.data;\n});\nexport const getProductDetails = createAsyncThunk(\"products/getProductDetails\", async item => {\n  const response = await axios.get(`http://localhost:5000/api/products/${item._id}`);\n  return response.data;\n});\nconst productsSlice = createSlice({\n  name: \"products\",\n  initialState: {\n    product: {},\n    products: [],\n    relatedProducts: [],\n    sellingProducts: [],\n    status: null\n  },\n  reducers: {\n    filterByCategory: (state, _ref) => {\n      let {\n        payload\n      } = _ref;\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\n      if (payload === \"all\") state.products = productsClone;else {\n        const filteredProducts = productsClone.filter(item => item.category === payload);\n        state.products = filteredProducts;\n      }\n    },\n    getSellingProducts: state => {\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\n      const allProducts = productsClone.filter(item => item.hasOwnProperty(\"oldprice\"));\n      state.sellingProducts = allProducts;\n    },\n    filterSellingsProductsByCategory: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\n      const sellingProductsClone = productsClone.filter(item => item.hasOwnProperty(\"oldprice\"));\n      if (payload === \"all\") state.sellingProducts = sellingProductsClone;else {\n        const filteredProducts = sellingProductsClone.filter(item => item.category === payload);\n        state.sellingProducts = filteredProducts;\n      }\n    },\n    getRelatedProducts: (state, _ref3) => {\n      let {\n        payload\n      } = _ref3;\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\n      const newProducts = productsClone.filter(item => item.category === payload.category).filter(element => element._id !== payload._id);\n      console.log(newProducts);\n    }\n  },\n  extraReducers: {\n    [fetchProducts.pending]: state => {\n      state.status = \"Pending\";\n    },\n    [fetchProducts.fulfilled]: (state, _ref4) => {\n      let {\n        payload\n      } = _ref4;\n      state.products = payload;\n    },\n    [fetchProducts.rejected]: state => {\n      state.status = \"Rejected\";\n    },\n    [getProductDetails.fulfilled]: (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      state.product = payload;\n    }\n  }\n});\nexport const {\n  filterByCategory,\n  getSellingProducts,\n  filterSellingsProductsByCategory,\n  getRelatedProducts\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchProducts","response","get","localStorage","setItem","JSON","stringify","data","getProductDetails","item","_id","productsSlice","name","initialState","product","products","relatedProducts","sellingProducts","status","reducers","filterByCategory","state","payload","productsClone","parse","getItem","filteredProducts","filter","category","getSellingProducts","allProducts","hasOwnProperty","filterSellingsProductsByCategory","sellingProductsClone","getRelatedProducts","newProducts","element","console","log","extraReducers","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/PC'S/Desktop/Nouveau dossier/ecommerce mahdi/client/src/redux/features/productsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nexport const fetchProducts = createAsyncThunk(\r\n  \"products/fetchProducts\",\r\n  async () => {\r\n    const response = await axios.get(\"http://localhost:5000/api/products\");\r\n    localStorage.setItem(\"products\", JSON.stringify(response.data));\r\n    return response.data;\r\n  }\r\n);\r\nexport const getProductDetails = createAsyncThunk(\r\n  \"products/getProductDetails\",\r\n  async (item) => {\r\n    const response = await axios.get(\r\n      `http://localhost:5000/api/products/${item._id}`\r\n    );\r\n    return response.data;\r\n  }\r\n);\r\nconst productsSlice = createSlice({\r\n  name: \"products\",\r\n  initialState: {\r\n    product: {},\r\n    products: [],\r\n    relatedProducts: [],\r\n    sellingProducts: [],\r\n    status: null,\r\n  },\r\n  reducers: {\r\n    filterByCategory: (state, { payload }) => {\r\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\r\n      if (payload === \"all\") state.products = productsClone;\r\n      else {\r\n        const filteredProducts = productsClone.filter(\r\n          (item) => item.category === payload\r\n        );\r\n        state.products = filteredProducts;\r\n      }\r\n    },\r\n    getSellingProducts: (state) => {\r\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\r\n      const allProducts = productsClone.filter((item) =>\r\n        item.hasOwnProperty(\"oldprice\")\r\n      );\r\n      state.sellingProducts = allProducts;\r\n    },\r\n    filterSellingsProductsByCategory: (state, { payload }) => {\r\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\r\n      const sellingProductsClone = productsClone.filter((item) =>\r\n        item.hasOwnProperty(\"oldprice\")\r\n      );\r\n      if (payload === \"all\") state.sellingProducts = sellingProductsClone;\r\n      else {\r\n        const filteredProducts = sellingProductsClone.filter(\r\n          (item) => item.category === payload\r\n        );\r\n        state.sellingProducts = filteredProducts;\r\n      }\r\n    },\r\n    getRelatedProducts: (state, { payload }) => {\r\n      const productsClone = JSON.parse(localStorage.getItem(\"products\"));\r\n      const newProducts = productsClone\r\n        .filter((item) => item.category === payload.category)\r\n        .filter((element) => element._id !== payload._id);\r\n      console.log(newProducts);\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [fetchProducts.pending]: (state) => {\r\n      state.status = \"Pending\";\r\n    },\r\n    [fetchProducts.fulfilled]: (state, { payload }) => {\r\n      state.products = payload;\r\n    },\r\n    [fetchProducts.rejected]: (state) => {\r\n      state.status = \"Rejected\";\r\n    },\r\n    [getProductDetails.fulfilled]: (state, { payload }) => {\r\n      state.product = payload;\r\n    },\r\n  },\r\n});\r\nexport const {\r\n  filterByCategory,\r\n  getSellingProducts,\r\n  filterSellingsProductsByCategory,\r\n  getRelatedProducts,\r\n} = productsSlice.actions;\r\nexport default productsSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}